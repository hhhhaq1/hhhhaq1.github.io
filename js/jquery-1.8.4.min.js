$('#login-button').click(function (event) {
    event.preventDefault();
    var pwd = document.getElementById("pwd").value;
    if (pwd === "0216") {
        const bgm = document.getElementById('bgm');
        
        // 立即尝试播放（用户点击按钮属于交互）
        bgm.play().then(() => {
            localStorage.setItem('musicPlaying', 'true');
            $('form').fadeOut(500);
            $('.wrapper').addClass('form-success');
            requestFullScreen();
            setTimeout(() => {
                location.href = "index1.html";
            }, 2000);
        }).catch(() => {
            // 播放失败时添加一次性点击监听
            const playHandler = () => {
                bgm.play().then(() => {
                    localStorage.setItem('musicPlaying', 'true');
                    document.body.removeEventListener('click', playHandler);
                });
            };
            document.body.addEventListener('click', playHandler, { once: true });
        });
    } else {
        alert("密码错误");
    }
});

function requestFullScreen(element) {
	var element=document.documentElement;
 // 判断各种浏览器，找到正确的方法
 //alert(element.webkitRequestFullScreen);
 var requestMethod = element.requestFullScreen || //W3C
 element.webkitRequestFullScreen || //Chrome等
 element.mozRequestFullScreen || //FireFox
 element.msRequestFullScreen; //IE11
 if (requestMethod) {
  requestMethod.call(element);
 }
 else if (typeof window.ActiveXObject !== "undefined") {//for Internet Explorer
  var wscript = new ActiveXObject("WScript.Shell");
  if (wscript !== null) {
   wscript.SendKeys("{F11}");
  }
 }
}
function changeFrameHeight(){
    var ifm= document.getElementById("iframepage"); 
    ifm.height=document.documentElement.clientHeight;

}

window.onresize=function(){  
     changeFrameHeight();  

} 