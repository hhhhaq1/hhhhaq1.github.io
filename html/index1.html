<!DOCTYPE html>
<html>

<head>

  <meta charset="UTF-8">

  <title>Happy Birthday</title>

  <link rel="stylesheet" href="../css/normalizel.css">

  <link rel="stylesheet" href="../css/stylel.css" media="screen" type="text/css" />

</head>

<body>
  <canvas class="canvas"></canvas>

  <div class="help">?</div>

  <div class="ui">
    <input class="ui-input" type="text" />
    <span class="ui-return">↵</span>
  </div>

  <div class="overlay">
    <div class="tabs">
      <div class="tabs-labels"><span class="tabs-label">M</span><span class="tabs-label">E</span><span
          class="tabs-label">X</span></div>

      <div class="tabs-panels">
        <ul class="tabs-panel commands">
          <li class="commands-item"><span class="commands-item-title">Text</span><span class="commands-item-info"
              data-demo="Hello :)">Type anything</span><span class="commands-item-action">Demo</span></li>
          <li class="commands-item"><span class="commands-item-title">Countdown</span><span class="commands-item-info"
              data-demo="#countdown 10">#countdown<span class="commands-item-mode">number</span></span><span
              class="commands-item-action">Demo</span></li>
          <li class="commands-item"><span class="commands-item-title">Time</span><span class="commands-item-info"
              data-demo="#time">#time</span><span class="commands-item-action">Demo</span></li>
          <li class="commands-item"><span class="commands-item-title">Rectangle</span><span class="commands-item-info"
              data-demo="#rectangle 30x15">#rectangle<span class="commands-item-mode">width x height</span></span><span
              class="commands-item-action">Demo</span></li>
          <li class="commands-item"><span class="commands-item-title">Circle</span><span class="commands-item-info"
              data-demo="#circle 25">#circle<span class="commands-item-mode">diameter</span></span><span
              class="commands-item-action">Demo</span></li>

          <li class="commands-item commands-item--gap"><span class="commands-item-title">Animate</span><span
              class="commands-item-info" data-demo="The time is|#time|#countdown 3|#icon thumbs-up"><span
                class="commands-item-mode">command1</span>&nbsp;|<span
                class="commands-item-mode">command2</span></span><span class="commands-item-action">Demo</span></li>
        </ul>
      </div>
    </div>
  </div>

  <script src="../js/indexl.js"></script>
  <audio id="bgm" src="../music/1.mp3" loop></audio>
  <div class="video-container"
    style="display:none; position:fixed; top:0; left:0; width:100%; height:100%; z-index:999">
    <video id="birthday-video" width="100%" height="100%" controls muted playsinline>
      <source src="../祝福视频.mp4" type="video/mp4">
      <source src="../祝福视频.webm" type="video/webm">
    </video>
  </div>
</body>
<script>
document.addEventListener('DOMContentLoaded', function () {
    const bgm = document.getElementById('bgm');
    // 从localStorage恢复状态
    if (localStorage.getItem('musicPlaying') === 'true') {
        bgm.currentTime = parseFloat(localStorage.getItem('musicTime')) || 0;
        bgm.play().catch(e => {
            document.body.addEventListener('click', () => bgm.play(), { once: true });
        });
    }

    // 持续保存播放进度
    const saveInterval = setInterval(() => {
        localStorage.setItem('musicTime', bgm.currentTime);
    }, 500);

    // 页面关闭前清理
    window.addEventListener('beforeunload', () => {
        clearInterval(saveInterval);
    });
});
</script>

</html>